<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/product.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script type="module" src="js/fashion.js"></script>
</head>

<body>
    <section class="navbar">
        <nav>
            <div style=" display: flex;align-items: center;">
                <a href="index.html">
                    <div id="logo">QuickMart</div>
                </a>
            </div>

            <div>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html?category=fruitsVegetables">Fruits & Vegetables</a></li>
                    <li><a href="products.html?category=bakery">Bakery</a></li>
                    <li><a href="products.html?category=fashion">Fashion</a></li>
                    <li><a href="products.html?category=beauty">Beauty</a></li>
                    <li><a href="products.html?category=decor">Decor</a></li>
                    <li><a href="about.html">About Us</a></li>
                </ul>
            </div>


            <div class="right-sec">
                <div>
                    <input type="text" placeholder="Search...">
                </div>
                <div>
                    <a href="login.html" id="cart-icon"><i class="fa-solid fa-cart-shopping"></i><a>
                </div>

                <div id="iconDropdown">
                    <i class="fas fa-user"> </i>

                    <div id="iconDropdownContent">
                        <a href="login.html">Login</a>
                        <a href="signup.html">SignUp</a>
                        <a href="profile.html">Profile</a>
                        <a href="logout.html">Logout</a>

                    </div>
                </div>

            </div>
        </nav>
    </section>


    <section class="main">
        <section class="left-panel">
            <div class="left">
                <div>
                    <p class="category">Fashion</p>
                    <ul class="subCat">
                        <a href="products.html?category=fashion&subcat=women">
                            <li>Women</li>
                        </a>
                        <a href="products.html?category=fashion&subcat=men">
                            <li>Men</li>
                        </a>
                        <a href="products.html?category=fashion&subcat=kids">
                            <li>Kids</li>
                        </a>
                    </ul>
                </div>

                <div>
                    <p class="category">Beauty</p>
                    <ul class="subCat">
                        <a href="products.html?category=beauty&subcat=makeup">
                            <li>Makeup</li>
                        </a>
                        <a href="products.html?category=beauty&subcat=skincare">
                            <li>SkinCare</li>
                        </a>
                        <a href="products.html?category=beauty&subcat=haircare">
                            <li>HaireCare</li>
                        </a>
                    </ul>
                </div>

                <div>
                    <p class="category">Fruits & Vegetables</p>
                    <ul class="subCat">
                        <a href="products.html?category=fruitsVegetables&subcat=fruits">
                            <li>Fresh Fruits</li>
                        </a>
                        <a href="products.html?category=fruitsVegetables&subcat=vegetables">
                            <li>Fresh Vegetables</li>
                        </a>
                        <a href="products.html?category=fruitsVegetables&subcat=exoticFruits">
                            <li>Exotic fruit & veggies</li>
                        </a>
                    </ul>
                </div>

                <div>
                    <p class="category">Bakery</p>
                    <ul class="subCat">
                        <a href="products.html?category=bakery&subcat=breads">
                            <li>Breads & Buns</li>
                        </a>
                        <a href="products.html?category=bakery&subcat=cakes">
                            <li>Cakes</li>
                        </a>
                        <a href="products.html?category=bakery&subcat=dairy">
                            <li>Dairy</li>
                        </a>
                        <a href="products.html?category=bakery&subcat=snacks">
                            <li>Snacks</li>
                        </a>
                    </ul>
                </div>

                <div>
                    <p class="category">Decor</p>
                    <ul class="subCat">
                        <a href="products.html?category=decor&subcat=vases">
                            <li>Vases</li>
                        </a>
                        <a href="products.html?category=decor&subcat=mirrors">
                            <li>Mirrors</li>
                        </a>
                        <a href="products.html?category=decor&subcat=lamps">
                            <li>Lamps & Lighting</li>
                        </a>
                        <a href="products.html?category=decor&subcat=sofas">
                            <li>Sofas & Seating</li>
                        </a>
                    </ul>
                </div>

            </div>
            <div class="right">
                <section id="right-panel">

                </section>
            </div>
        </section>


    </section>



    <script src="js/fashion.js"></script>
    <script>

        const queryString = window.location.search; // Get query string part of the URL
        const urlParams = new URLSearchParams(queryString);
        const category = urlParams.get('category');

        const subcat = urlParams.get("subcat");
        const categoryProducts = products[category];

        const productCard = () => {
            const container = document.getElementById('right-panel');
            container.innerHTML = ''; // Clear previous content

            // Filter products based on category if it exists
                const filteredProducts = subcat
                ? categoryProducts.filter((product) => product.subcat === subcat)
                : categoryProducts;

            // Render the products
            if (filteredProducts.length > 0) {
                filteredProducts.forEach(product => {
                    container.innerHTML += `
                <div>
                    <p>Name: ${product.name}</p>
                    <p>Price: ${product.price}</p>
                    <p>category: ${category}</p>
                    <p>subcategory: ${subcat}</p>
                    <p><img src="${product.image}" alt="${product.name}" style="width: 100px; height: auto;"></p>
                    <p>
                        <a href="productPreview.html?category=${category}&id=${product.id}">
                            <button>Preview</button>
                        </a>
                    </p>
                </div>`;
                });
            } else {
                container.innerHTML = `<p>No products found in this category.</p>`;
            }
        };

        productCard();

    </script>
</body>

</html>