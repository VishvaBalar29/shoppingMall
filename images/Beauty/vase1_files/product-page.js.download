"use strict";function btyProductGallery(doc=document){let gallery=doc.querySelector(".gallery-media"),container=gallery?gallery.closest(".main-product"):!1,layout=container?container.getAttribute("data-gallery"):!1,mainSelector=gallery?gallery.querySelector(".product-main-slide"):!1,thumbSelector=gallery?gallery.querySelector(".product-thumb-slide"):!1;if(!(!mainSelector||typeof Swiper>"u"||(layout==="vertical"||layout==="grid")&&window.matchMedia("(min-width: 992px)").matches)){if(thumbSelector){window.btyThumbSlider=new Swiper(thumbSelector,btyThumbSlideOptions);let thumbWrap=thumbSelector.querySelector(".swiper-wrapper");if(thumbWrap){let lastThumb=thumbWrap.children[thumbWrap.children.length-1];lastThumb.swiperSlideOffset+lastThumb.offsetWidth-mainSelector.offsetWidth<0&&thumbWrap.classList.add("flex-justify-center")}}layout==="horizontal"&&(btyMainSlideOptions.thumbs={swiper:window.btyThumbSlider}),window.btyMainSlider=new Swiper(mainSelector,btyMainSlideOptions),window.btyMainSlider.on("slideChange",function(){btyMediaAction()})}}function btyGalleryList(doc=document){let list=doc.querySelector('[data-gallery="vertical"]');if(!list||window.matchMedia("(max-width: 991px)").matches)return;let headerSticky=document.querySelector(".header.has-sticky"),headerStickyHeight=headerSticky?headerSticky.offsetHeight:0;const activeThumb=function(){let imagesItem=list.querySelectorAll(".main-item");if(imagesItem.length)for(let i=0,j=imagesItem.length;i<j;i++){let rect=imagesItem[i].getBoundingClientRect(),style=window.getComputedStyle(imagesItem[i]),marginBot=parseInt(style.marginBottom),itemHeight=rect.height,itemTop=rect.top-headerStickyHeight,thumbIndex=i+1,thumbItem=list.querySelector(".gallery-thumbs .media-preview-wrap:nth-child("+thumbIndex+")");if(!thumbItem)return;itemTop<=1&&itemTop+marginBot-1>=itemHeight*-1?thumbItem.classList.add("active"):thumbItem.classList.remove("active")}},scrollToImage=function(){let thumbItems=list.querySelectorAll(".gallery-thumbs .media-preview-wrap");if(thumbItems.length)for(let i=0,j=thumbItems.length;i<j;i++)thumbItems[i].onclick=function(){let imageItem=list.getElementsByClassName("main-item")[i];imageItem&&imageItem.scrollIntoView({behavior:"smooth"})}};activeThumb(),scrollToImage(),window.onscroll=function(){activeThumb()},window.onload=function(){activeThumb()}}function btyGalleryZoom(doc=document){let selectors=doc.querySelectorAll(".media-preview-wrap[data-zoom]");selectors.length&&selectors.forEach(function(item){item.onmousemove=function(e){let x=e.offsetX/item.offsetWidth*100,y=e.offsetY/item.offsetHeight*100,imgFullSrc=item.getAttribute("data-zoom"),newImage=new Image;if(!imgFullSrc)return;item.classList.add("zooming"),newImage.crossOrigin="anonymous";let productImg=item.getAttribute("data-key")||!1;item.style.backgroundImage||(sessionStorage.getItem(productImg)?item.style.backgroundImage="url("+sessionStorage.getItem(productImg)+")":(item.classList.add("loading"),newImage.onload=function(){let imageSrc=btyGetImageSrc(newImage);productImg&&sessionStorage.setItem(productImg,imageSrc),item.style.backgroundImage="url("+imageSrc+")",item.classList.remove("loading")},newImage.src=imgFullSrc,newImage.onerror=function(){item.classList.remove("loading"),console.log("Error! Loading Image.")})),item.style.backgroundPosition=x+"% "+y+"%"},item.onmouseleave=function(){item.classList.remove("zooming"),item.style.backgroundImage="",item.style.backgroundPosition=""}})}function btyPhotoswipeHandle(doc=document){let parseThumbnailElements=function(el){let thumbElements=el.querySelectorAll(".media-preview-wrap"),items=[],wrapEl,dimension,item;if(thumbElements.length){for(let i=0,ij=thumbElements.length;i<ij;i++)wrapEl=thumbElements[i],wrapEl.tagName==="DIV"&&(dimension=wrapEl.getAttribute("data-dimension"),dimension&&(dimension=dimension.split("x"),item={src:wrapEl.getAttribute("data-zoom"),w:parseInt(dimension[0],10),h:parseInt(dimension[1],10),position:Number(wrapEl.getAttribute("data-pos"))},wrapEl.children.length>0&&(item.msrc=wrapEl.children[0].getAttribute("src")),item.el=wrapEl,items.push(item)));return items}},closest=function closest2(el,fn){return el&&(fn(el)?el:closest2(el.parentNode,fn))},onThumbnailsClick=function(e){e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1;let eTarget=e.target||e.srcElement,clickedListItem=closest(eTarget,function(el){return el.tagName&&el.tagName==="DIV"});if(!clickedListItem)return;let clickedGallery=clickedListItem.parentNode.parentNode,childNodes=clickedGallery.childNodes,nodeIndex=0,index;for(let i=0,j=childNodes.length;i<j;i++)if(childNodes[i].nodeType===1&&childNodes[i].querySelector("[data-dimension]")){if(childNodes[i]===clickedListItem.parentNode){index=nodeIndex;break}nodeIndex++}return index>=0&&openPhotoSwipe(index,clickedGallery),!1},photoswipeParseHash=function(){let hash=window.location.hash.substring(1),params={};if(hash.length<5)return params;let vars=hash.split("&");for(let i=0,ij=vars.length;i<ij;i++){if(!vars[i])continue;let pair=vars[i].split("=");pair.length<2||(params[pair[0]]=pair[1])}return params.gid&&(params.gid=parseInt(params.gid,10)),params},openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){let pswpElement=doc.querySelector(".pswp"),gallery,options,items;if(items=parseThumbnailElements(galleryElement),options={galleryUID:galleryElement.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(index2){let thumbnail=items[index2].el.querySelector("img"),pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width}}},fromURL)if(options.galleryPIDs){for(let j=0,ji=items.length;j<ji;j++)if(items[j].pid==index){options.index=j;break}}else options.index=parseInt(index,10)-1;else options.index=parseInt(index,10);isNaN(options.index)||(disableAnimation&&(options.showAnimationDuration=0),gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options),gallery.init(),gallery.listen("afterChange",function(e){if(typeof window.btyMainSlider=="object"){let pos=gallery.items[gallery.getCurrentIndex()].position-1;window.btyMainSlider.slideTo(pos,0)}}))},galleryElements=doc.querySelectorAll(".product-main-slide .swiper-wrapper");if(galleryElements.length){for(let i=0,l=galleryElements.length;i<l;i++)galleryElements[i].setAttribute("data-pswp-uid",i+1),galleryElements[i].onclick=onThumbnailsClick;let hashData=photoswipeParseHash();hashData.pid&&hashData.gid&&openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],!0,!0)}}function btySetupXr(){if(!window.ShopifyXR)document.addEventListener("shopify_xr_initialized",function(){btySetupXr()});else{let modelConfig=document.getElementById("product-model-config");if(!modelConfig)return;window.ShopifyXR.addModels(JSON.parse(modelConfig.textContent)),window.ShopifyXR.setupXRElements(),modelConfig.remove()}}function btySetupModelViewerUI(errors){if(errors)return;let modelLoaded=document.querySelectorAll(".media-loaded model-viewer");modelLoaded.length&&modelLoaded.forEach(function(model){const modelViewerUI=new Shopify.ModelViewerUI(model)})}function btyModelExit(){document.addEventListener("click",function(e){let el=e.target,node=document.querySelector(".product-main-slide")?".product-main-slide":".single-media";el.closest(node)||btyMediaAction()})}function btyMediaAction(el=document,type="pause"){let video=el.querySelectorAll(".js-youtube, .js-vimeo, video");video.length&&video.length&&video.forEach(function(vd){vd.tagName.toLowerCase()==="video"?type==="pause"?vd.pause():vd.play():vd.classList.contains("js-youtube")?vd.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"):vd.classList.contains("js-vimeo")&&vd.contentWindow.postMessage('{"method":"pause"}',"*")})}function btyLoadModel(doc=document){let button=doc.querySelectorAll(".main-item");button.length&&button.forEach(function(el){el.addEventListener("click",function(){let wrapper=el.querySelector(".media-preview-wrap");if(btyMediaAction(wrapper,"play"),wrapper.classList.contains("media-loaded"))return;let template=wrapper.querySelector("template");if(wrapper.querySelector(".media-content")||(wrapper.classList.add("media-loaded"),template&&wrapper.insertAdjacentHTML("beforeend",'<div class="media-content">'+template.innerHTML+"</div>")),template&&template.remove(),btyModelExit(),typeof wrapper.getAttribute("data-model")=="string"){let obj={model3dId:wrapper.getAttribute("data-id")};window.ShopifyXR.launchXR(obj),window.Shopify.loadFeatures([{name:"model-viewer-ui",version:"1.0",onLoad:btySetupModelViewerUI}])}})})}function btyProductRecommendations(doc=document){let selectors=doc.querySelectorAll(".product-recommendations");selectors.length&&selectors.forEach(function(el){let url=el.getAttribute("data-url");el.innerHTML.trim()||!url||fetch(url).then(function(r){if(r.status!==200)throw console.log("Status Code: "+r.status),r;return r.text()}).then(function(res){el.innerHTML=btyGetSectionHtml(res,".product-recommendations"),btyAddToCart(doc),btyQuickView(doc),btySwatch(doc),btyCarousel(doc),btyAddWishlist(doc),btyCompare(doc)}).catch(function(err){console.log(err)})})}document.addEventListener("DOMContentLoaded",function(){window.Shopify.loadFeatures([{name:"shopify-xr",version:"1.0",onLoad:btySetupXr}]),btyProductGallery(),btyGalleryZoom(),btyGalleryList(),btyPhotoswipeHandle(),btyLoadModel(),btyProductRecommendations()}),document.addEventListener("shopify:section:load",function(e){let section=e.target.closest("section.shopify-section");setTimeout(function(){btyProductRecommendations(section)})}),document.addEventListener("shopify:section:select",function(e){let section=e.target;btyProductGallery(section),btyGalleryZoom(section),btyPhotoswipeHandle(section),btyGalleryList(section),setTimeout(function(){btyProductRecommendations(section)})}),document.addEventListener("shopify:block:select",function(e){let section=e.target.closest(".shopify-section");section&&(btySlider(section,e),btyProductGallery(section),btyGalleryZoom(section),btyPhotoswipeHandle(section),btyGalleryList(section))});
//# sourceMappingURL=/cdn/shop/t/3/assets/product-page.js.map?v=162772211189727802661721907544
